(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(2),u=n(15),r=n.n(u),a=n(6),i=n(3),s=n(4),l=n.n(s),f="/api/persons",d=function(){return l.a.get(f).then((function(e){return e.data}))},j=function(e){return l.a.post(f,e).then((function(e){return e.data}))},b=function(e){return l.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},h=function(e,t){return l.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},m=(n(38),function(e){var t=e.text;return Object(c.jsx)("h2",{children:t})}),O=function(e){var t=e.filterText,n=e.onChange;return Object(c.jsxs)("div",{children:["filter shown with : ",Object(c.jsx)("input",{value:t,onChange:n})]})},x=function(e){var t=e.addNewContact,n=e.handleNameInput,o=e.newName,u=e.hendleNumberInput,r=e.newNumber;return Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{onChange:n,value:o})]}),Object(c.jsxs)("div",{children:["number : ",Object(c.jsx)("input",{onChange:u,value:r})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var t=e.person,n=e.deleteContactOf;return Object(c.jsxs)("li",{children:[t.name," : ",t.number,Object(c.jsx)("button",{onClick:function(){return n(t.id)},children:"delete"})]})},v=function(e){var t=e.personsToShow,n=e.deleteContactOf;return Object(c.jsx)("ul",{children:t.map((function(e){return Object(c.jsx)(p,{person:e,deleteContactOf:n},e.id)}))})},w=function(e){var t=e.notificationMessage;return null===t?null:t.startsWith("Success")?Object(c.jsx)("div",{className:"success",children:t}):Object(c.jsx)("div",{className:"error",children:t})},g=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),n=t[0],u=t[1],r=Object(o.useState)(""),s=Object(i.a)(r,2),l=s[0],f=s[1],p=Object(o.useState)(""),g=Object(i.a)(p,2),C=g[0],N=g[1],S=Object(o.useState)(""),y=Object(i.a)(S,2),T=y[0],k=y[1],I=Object(o.useState)(null),D=Object(i.a)(I,2),E=D[0],J=D[1];Object(o.useEffect)((function(){console.log("effect"),d().then((function(e){return u(e)}))}),[]),console.log("render ",n.length," contacts");var L=function(){f(""),N(""),k("")},M=""===T?n:n.filter((function(e){return e.name.toLowerCase().includes(T.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(m,{text:"Phonebook"}),Object(c.jsx)(w,{notificationMessage:E}),Object(c.jsx)(O,{filterText:T,onChange:function(e){k(e.target.value)}}),Object(c.jsx)(m,{text:"Add a New"}),Object(c.jsx)("br",{}),Object(c.jsx)(x,{addNewContact:function(e){if(e.preventDefault(),-1===n.map((function(e){return e.name})).indexOf(l))j({name:l,number:C}).then((function(e){u(n.concat(e)),L(),J("Successfully added new contact '".concat(e.name,"'")),setTimeout((function(){J(null)}),5e3)})).catch((function(e){var t=e.response.data.error;J(t),setTimeout((function(){J(null)}),5e3)}));else if(window.confirm("Do you want to update the number of ".concat(l," ?"))){var t=n.find((function(e){return e.name===l})),c=Object(a.a)(Object(a.a)({},t),{},{number:C});h(c.id,c).then((function(e){u(n.map((function(t){return t.id===e.id?e:t}))),J("Successfully changed contact number of '".concat(e.name,"'")),L(),setTimeout((function(){J(null)}),5e3)})).catch((function(e){404===e.response.status?(J("Contact '".concat(t.name,"' has already been removed from server")),u(n.filter((function(e){return e.id!==t.id}))),L()):J(e.response.data.error),setTimeout((function(){J(null)}),5e3)}))}},handleNameInput:function(e){f(e.target.value)},newName:l,hendleNumberInput:function(e){N(e.target.value)},newNumber:C}),Object(c.jsx)("br",{}),Object(c.jsx)(m,{text:"Number"}),Object(c.jsx)(v,{personsToShow:M,deleteContactOf:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Do you really want to delete ".concat(t.name,"?"))&&b(e).then((function(c){u(n.filter((function(t){return t.id!==e}))),J("Successfully deleted contact '".concat(t.name,"'")),setTimeout((function(){J(null)}),5e3)}))}})]})};r.a.render(Object(c.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.21b64bdd.chunk.js.map